<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3I/ATLAS ç¤¾åŒºäº’åŠ¨</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vanta/0.5.24/vanta.birds.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body { font-family: 'Inter', sans-serif; }
        .hero-bg { background: linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #334155 100%); }
        .glass-effect { backdrop-filter: blur(10px); background: rgba(255, 255, 255, 0.1); }
        .glow { box-shadow: 0 0 20px rgba(59, 130, 246, 0.3); }
        .animate-float { animation: float 6s ease-in-out infinite; }
        @keyframes float { 0%, 100% { transform: translateY(0px); } 50% { transform: translateY(-10px); } }
        .animate-pulse-glow { animation: pulse-glow 2s ease-in-out infinite alternate; }
        @keyframes pulse-glow { from { box-shadow: 0 0 10px rgba(59, 130, 246, 0.3); } to { box-shadow: 0 0 30px rgba(59, 130, 246, 0.6); } }
        .text-shadow { text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5); }
        #vanta-bg { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; }
        .chat-container { height: 500px; overflow-y: auto; }
        .message { animation: slideIn 0.3s ease-out; }
        @keyframes slideIn { from { transform: translateX(-20px); opacity: 0; } to { transform: translateX(0); opacity: 1; } }
        .image-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 1rem; }
        .image-card { transition: transform 0.3s ease; }
        .image-card:hover { transform: scale(1.05); }
        .upload-area { border: 2px dashed #3b82f6; transition: all 0.3s ease; }
        .upload-area:hover { border-color: #8b5cf6; background-color: rgba(59, 130, 246, 0.1); }
        .user-avatar { width: 40px; height: 40px; border-radius: 50%; background: linear-gradient(45deg, #3b82f6, #8b5cf6); display: flex; align-items: center; justify-content: center; color: white; font-weight: bold; }
        .online-indicator { width: 8px; height: 8px; background-color: #10b981; border-radius: 50%; display: inline-block; margin-left: 5px; }
    </style>
</head>
<body class="bg-slate-900 text-white overflow-x-hidden">
    <div id="vanta-bg"></div>
    
    <!-- Navigation -->
    <nav class="fixed top-0 w-full z-50 glass-effect border-b border-white/10">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center space-x-3">
                    <i class="fas fa-meteor text-2xl text-blue-400"></i>
                    <span class="text-xl font-bold">3I/ATLAS Tracker</span>
                </div>
                <div class="hidden md:flex space-x-8">
                    <a href="index.html" class="hover:text-blue-400 transition-colors">é¦–é¡µ</a>
                    <a href="index.html#live-data" class="hover:text-blue-400 transition-colors">å®æ—¶æ•°æ®</a>
                    <a href="index.html#observations" class="hover:text-blue-400 transition-colors">è§‚æµ‹ä¿¡æ¯</a>
                    <a href="community.html" class="text-blue-400 font-semibold">ç¤¾åŒº</a>
                    <a href="index.html#resources" class="hover:text-blue-400 transition-colors">èµ„æº</a>
                </div>
                <div class="flex items-center space-x-4">
                    <span class="text-sm text-gray-400">åœ¨çº¿ç”¨æˆ·:</span>
                    <span class="text-blue-400 font-semibold" id="online-count">47</span>
                    <div class="online-indicator"></div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero-bg pt-24 pb-12">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
            <h1 class="text-4xl md:text-6xl font-bold text-shadow mb-6">
                <span class="bg-gradient-to-r from-blue-400 to-purple-600 bg-clip-text text-transparent">
                    å½—æ˜Ÿè§‚æµ‹ç¤¾åŒº
                </span>
            </h1>
            <p class="text-xl text-gray-300 mb-8 text-shadow">
                ä¸å…¨çƒå¤©æ–‡çˆ±å¥½è€…ä¸€èµ·åˆ†äº«3I/ATLASå½—æ˜Ÿçš„è§‚æµ‹ä½“éªŒ
            </p>
            <div class="flex justify-center space-x-6">
                <div class="glass-effect rounded-lg px-6 py-3">
                    <i class="fas fa-users text-blue-400 mr-2"></i>
                    <span class="font-semibold">æ´»è·ƒè®¨è®º</span>
                </div>
                <div class="glass-effect rounded-lg px-6 py-3">
                    <i class="fas fa-camera text-green-400 mr-2"></i>
                    <span class="font-semibold">å›¾ç‰‡åˆ†äº«</span>
                </div>
                <div class="glass-effect rounded-lg px-6 py-3">
                    <i class="fas fa-chart-line text-purple-400 mr-2"></i>
                    <span class="font-semibold">è§‚æµ‹æŠ¥å‘Š</span>
                </div>
            </div>
        </div>
    </section>

    <!-- Main Content -->
    <section class="py-12">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                
                <!-- Chat Section -->
                <div class="lg:col-span-2">
                    <div class="glass-effect rounded-xl p-6 mb-8">
                        <h2 class="text-2xl font-bold mb-6 flex items-center">
                            <i class="fas fa-comments text-blue-400 mr-3"></i>
                            å®æ—¶è®¨è®º
                        </h2>
                        
                        <!-- Chat Messages -->
                        <div class="chat-container mb-6" id="chat-messages">
                            <!-- Messages will be populated by JavaScript -->
                        </div>
                        
                        <!-- Message Input -->
                        <div class="flex space-x-4">
                            <div class="user-avatar">
                                <span id="current-user-avatar">ä½ </span>
                            </div>
                            <div class="flex-1">
                                <input type="text" id="message-input" placeholder="åˆ†äº«ä½ çš„è§‚æµ‹å‘ç°..." 
                                       class="w-full bg-gray-800/50 border border-gray-600 rounded-lg px-4 py-3 text-white placeholder-gray-400 focus:border-blue-400 focus:outline-none">
                            </div>
                            <button id="send-message" class="bg-blue-600 hover:bg-blue-700 px-6 py-3 rounded-lg transition-colors">
                                <i class="fas fa-paper-plane"></i>
                            </button>
                        </div>
                        
                        <!-- Message Options -->
                        <div class="mt-4 flex space-x-4">
                            <button id="upload-image-btn" class="text-blue-400 hover:text-blue-300 text-sm">
                                <i class="fas fa-image mr-1"></i>
                                åˆ†äº«å›¾ç‰‡
                            </button>
                            <button id="share-observation-btn" class="text-green-400 hover:text-green-300 text-sm">
                                <i class="fas fa-telescope mr-1"></i>
                                æäº¤è§‚æµ‹æŠ¥å‘Š
                            </button>
                        </div>
                    </div>

                    <!-- Community Stats -->
                    <div class="glass-effect rounded-xl p-6">
                        <h3 class="text-xl font-bold mb-4 flex items-center">
                            <i class="fas fa-chart-bar text-green-400 mr-3"></i>
                            ç¤¾åŒºç»Ÿè®¡
                        </h3>
                        <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                            <div class="text-center">
                                <div class="text-2xl font-bold text-blue-400" id="total-messages">1,247</div>
                                <div class="text-sm text-gray-400">æ¶ˆæ¯æ€»æ•°</div>
                            </div>
                            <div class="text-center">
                                <div class="text-2xl font-bold text-green-400" id="shared-images">89</div>
                                <div class="text-sm text-gray-400">åˆ†äº«å›¾ç‰‡</div>
                            </div>
                            <div class="text-center">
                                <div class="text-2xl font-bold text-purple-400" id="observation-reports">156</div>
                                <div class="text-sm text-gray-400">è§‚æµ‹æŠ¥å‘Š</div>
                            </div>
                            <div class="text-center">
                                <div class="text-2xl font-bold text-yellow-400" id="active-today">23</div>
                                <div class="text-sm text-gray-400">ä»Šæ—¥æ´»è·ƒ</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Sidebar -->
                <div class="space-y-8">
                    <!-- Active Users -->
                    <div class="glass-effect rounded-xl p-6">
                        <h3 class="text-xl font-bold mb-4 flex items-center">
                            <i class="fas fa-users text-purple-400 mr-3"></i>
                            æ´»è·ƒç”¨æˆ·
                        </h3>
                        <div class="space-y-3" id="active-users">
                            <!-- Users will be populated by JavaScript -->
                        </div>
                    </div>

                    <!-- Recent Observations -->
                    <div class="glass-effect rounded-xl p-6">
                        <h3 class="text-xl font-bold mb-4 flex items-center">
                            <i class="fas fa-star text-yellow-400 mr-3"></i>
                            æœ€æ–°è§‚æµ‹
                        </h3>
                        <div class="space-y-4" id="recent-observations">
                            <!-- Observations will be populated by JavaScript -->
                        </div>
                    </div>

                    <!-- Quick Actions -->
                    <div class="glass-effect rounded-xl p-6">
                        <h3 class="text-xl font-bold mb-4">å¿«é€Ÿæ“ä½œ</h3>
                        <div class="space-y-3">
                            <button id="quick-observation" class="w-full bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-lg transition-colors">
                                <i class="fas fa-plus mr-2"></i>
                                å¿«é€Ÿè§‚æµ‹è®°å½•
                            </button>
                            <button id="quick-image" class="w-full bg-green-600 hover:bg-green-700 text-white py-2 px-4 rounded-lg transition-colors">
                                <i class="fas fa-camera mr-2"></i>
                                ä¸Šä¼ è§‚æµ‹å›¾ç‰‡
                            </button>
                            <button id="quick-report" class="w-full bg-purple-600 hover:bg-purple-700 text-white py-2 px-4 rounded-lg transition-colors">
                                <i class="fas fa-file-alt mr-2"></i>
                                æäº¤è¯¦ç»†æŠ¥å‘Š
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Image Upload Modal -->
    <div id="image-upload-modal" class="fixed inset-0 bg-black/50 backdrop-blur-sm z-50 hidden">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="glass-effect rounded-xl p-6 max-w-md w-full">
                <h3 class="text-xl font-bold mb-4">åˆ†äº«è§‚æµ‹å›¾ç‰‡</h3>
                <div class="upload-area rounded-lg p-8 text-center mb-4">
                    <i class="fas fa-cloud-upload-alt text-4xl text-blue-400 mb-4"></i>
                    <p class="text-gray-300 mb-2">æ‹–æ‹½å›¾ç‰‡åˆ°è¿™é‡Œæˆ–ç‚¹å‡»ä¸Šä¼ </p>
                    <input type="file" id="image-upload" accept="image/*" class="hidden">
                    <button id="select-image" class="bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded-lg">
                        é€‰æ‹©å›¾ç‰‡
                    </button>
                </div>
                <div class="flex space-x-3">
                    <button id="cancel-upload" class="flex-1 bg-gray-600 hover:bg-gray-700 py-2 rounded-lg transition-colors">
                        å–æ¶ˆ
                    </button>
                    <button id="confirm-upload" class="flex-1 bg-blue-600 hover:bg-blue-700 py-2 rounded-lg transition-colors">
                        ä¸Šä¼ 
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Observation Report Modal -->
    <div id="observation-modal" class="fixed inset-0 bg-black/50 backdrop-blur-sm z-50 hidden">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="glass-effect rounded-xl p-6 max-w-lg w-full max-h-screen overflow-y-auto">
                <h3 class="text-xl font-bold mb-4">æäº¤è§‚æµ‹æŠ¥å‘Š</h3>
                <form id="observation-form" class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium mb-2">è§‚æµ‹æ—¶é—´</label>
                        <input type="datetime-local" id="observation-time" class="w-full bg-gray-800/50 border border-gray-600 rounded-lg px-3 py-2 text-white">
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-2">è§‚æµ‹åœ°ç‚¹</label>
                        <input type="text" id="observation-location" placeholder="ä¾‹å¦‚ï¼šåŒ—äº¬å¤©æ–‡å°" class="w-full bg-gray-800/50 border border-gray-600 rounded-lg px-3 py-2 text-white placeholder-gray-400">
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-2">ä½¿ç”¨è®¾å¤‡</label>
                        <input type="text" id="observation-equipment" placeholder="ä¾‹å¦‚ï¼š14è‹±å¯¸æœ›è¿œé•œ" class="w-full bg-gray-800/50 border border-gray-600 rounded-lg px-3 py-2 text-white placeholder-gray-400">
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-2">äº®åº¦ä¼°è®¡</label>
                        <input type="number" id="observation-magnitude" step="0.1" placeholder="ä¾‹å¦‚ï¼š13.3" class="w-full bg-gray-800/50 border border-gray-600 rounded-lg px-3 py-2 text-white placeholder-gray-400">
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-2">å¤‡æ³¨</label>
                        <textarea id="observation-notes" rows="3" placeholder="æè¿°ä½ çš„è§‚æµ‹å‘ç°..." class="w-full bg-gray-800/50 border border-gray-600 rounded-lg px-3 py-2 text-white placeholder-gray-400"></textarea>
                    </div>
                    <div class="flex space-x-3">
                        <button type="button" id="cancel-observation" class="flex-1 bg-gray-600 hover:bg-gray-700 py-2 rounded-lg transition-colors">
                            å–æ¶ˆ
                        </button>
                        <button type="submit" class="flex-1 bg-blue-600 hover:bg-blue-700 py-2 rounded-lg transition-colors">
                            æäº¤æŠ¥å‘Š
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-slate-900 border-t border-white/10 py-12 mt-20">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
            <div class="flex items-center justify-center space-x-3 mb-6">
                <i class="fas fa-meteor text-3xl text-blue-400"></i>
                <span class="text-2xl font-bold">3I/ATLAS Tracker</span>
            </div>
            <p class="text-gray-400 mb-4">è¿æ¥å…¨çƒå¤©æ–‡çˆ±å¥½è€…ï¼Œå…±åŒè¿½è¸ªæ˜Ÿé™…è®¿å®¢</p>
            <p class="text-sm text-gray-500">ç¤¾åŒºåŠŸèƒ½æµ‹è¯•ç‰ˆ - åˆ†äº«ä½ çš„è§‚æµ‹ä½“éªŒ</p>
        </div>
    </footer>

    <script>
        // Initialize Vanta.js background
        VANTA.BIRDS({
            el: "#vanta-bg",
            mouseControls: true,
            touchControls: true,
            gyroControls: false,
            minHeight: 200.00,
            minWidth: 200.00,
            scale: 1.00,
            scaleMobile: 1.00,
            backgroundColor: 0x0f172a,
            color1: 0x3b82f6,
            color2: 0x8b5cf6,
            colorMode: "variance",
            birdSize: 1.20,
            wingSpan: 25.00,
            speedLimit: 3.00,
            separation: 20.00,
            alignment: 20.00,
            cohesion: 20.00,
            quantity: 3.00
        });

        // Sample data
        const sampleUsers = [
            { name: 'AstroEnthusiast', avatar: 'AE', status: 'åœ¨çº¿', color: 'bg-blue-500' },
            { name: 'StarGazer2025', avatar: 'SG', status: 'è§‚æµ‹ä¸­', color: 'bg-green-500' },
            { name: 'CometHunter', avatar: 'CH', status: 'åœ¨çº¿', color: 'bg-purple-500' },
            { name: 'SpaceExplorer', avatar: 'SE', status: 'ç¦»å¼€', color: 'bg-gray-500' },
            { name: 'CosmicWatcher', avatar: 'CW', status: 'åœ¨çº¿', color: 'bg-yellow-500' }
        ];

        const sampleMessages = [
            { user: 'AstroEnthusiast', avatar: 'AE', message: 'ä»Šæ™šçš„è§‚æµ‹æ¡ä»¶å¾ˆå¥½ï¼Œçœ‹åˆ°äº†å½—æ˜Ÿå°¾å·´çš„å˜åŒ–ï¼', time: '2åˆ†é’Ÿå‰', type: 'text' },
            { user: 'StarGazer2025', avatar: 'SG', message: 'åˆ†äº«ä¸€å¼ åˆšæ‹çš„3I/ATLASå›¾ç‰‡', time: '5åˆ†é’Ÿå‰', type: 'image' },
            { user: 'CometHunter', avatar: 'CH', message: 'äº®åº¦ä¼°è®¡åœ¨13.2-13.4ä¹‹é—´ï¼Œæ¯”é¢„æœŸæ´»è·ƒ', time: '8åˆ†é’Ÿå‰', type: 'text' },
            { user: 'SpaceExplorer', avatar: 'SE', message: 'æäº¤äº†æ–°çš„è§‚æµ‹æŠ¥å‘Šï¼Œæ•°æ®å·²æ›´æ–°', time: '12åˆ†é’Ÿå‰', type: 'report' },
            { user: 'CosmicWatcher', avatar: 'CW', message: 'æœ‰äººæ³¨æ„åˆ°å½—æ˜Ÿé¢œè‰²çš„å˜åŒ–å—ï¼Ÿ', time: '15åˆ†é’Ÿå‰', type: 'text' }
        ];

        const sampleObservations = [
            { time: '30åˆ†é’Ÿå‰', observer: 'AstroEnthusiast', magnitude: '13.2', location: 'åŒ—äº¬' },
            { time: '1å°æ—¶å‰', observer: 'StarGazer2025', magnitude: '13.4', location: 'ä¸Šæµ·' },
            { time: '2å°æ—¶å‰', observer: 'CometHunter', magnitude: '13.3', location: 'å¹¿å·' },
            { time: '3å°æ—¶å‰', observer: 'SpaceExplorer', magnitude: '13.1', location: 'æ·±åœ³' }
        ];

        // Initialize page
        function initializePage() {
            renderActiveUsers();
            renderChatMessages();
            renderRecentObservations();
            updateCommunityStats();
        }

        // Render active users
        function renderActiveUsers() {
            const container = document.getElementById('active-users');
            container.innerHTML = sampleUsers.map(user => `
                <div class="flex items-center space-x-3 p-2 rounded-lg hover:bg-gray-800/30 transition-colors">
                    <div class="user-avatar ${user.color}">
                        ${user.avatar}
                    </div>
                    <div class="flex-1">
                        <div class="font-semibold text-sm">${user.name}</div>
                        <div class="text-xs text-gray-400">${user.status}</div>
                    </div>
                    <div class="online-indicator"></div>
                </div>
            `).join('');
        }

        // Render chat messages
        function renderChatMessages() {
            const container = document.getElementById('chat-messages');
            container.innerHTML = sampleMessages.map(msg => `
                <div class="message flex space-x-3 mb-4 p-3 rounded-lg hover:bg-gray-800/20 transition-colors">
                    <div class="user-avatar bg-blue-500">
                        ${msg.avatar}
                    </div>
                    <div class="flex-1">
                        <div class="flex items-center space-x-2 mb-1">
                            <span class="font-semibold text-sm">${msg.user}</span>
                            <span class="text-xs text-gray-400">${msg.time}</span>
                            <span class="text-xs px-2 py-1 rounded-full bg-blue-500/20 text-blue-400">${msg.type}</span>
                        </div>
                        <div class="text-gray-300">${msg.message}</div>
                        <div class="flex space-x-4 mt-2">
                            <button class="text-xs text-blue-400 hover:text-blue-300">
                                <i class="fas fa-thumbs-up mr-1"></i>ç‚¹èµ
                            </button>
                            <button class="text-xs text-green-400 hover:text-green-300">
                                <i class="fas fa-reply mr-1"></i>å›å¤
                            </button>
                            <button class="text-xs text-purple-400 hover:text-purple-300">
                                <i class="fas fa-share mr-1"></i>åˆ†äº«
                            </button>
                        </div>
                    </div>
                </div>
            `).join('');
            
            // Scroll to bottom
            container.scrollTop = container.scrollHeight;
        }

        // Render recent observations
        function renderRecentObservations() {
            const container = document.getElementById('recent-observations');
            container.innerHTML = sampleObservations.map(obs => `
                <div class="bg-gray-800/30 rounded-lg p-3">
                    <div class="flex justify-between items-center mb-2">
                        <span class="font-semibold text-sm">${obs.observer}</span>
                        <span class="text-xs text-gray-400">${obs.time}</span>
                    </div>
                    <div class="text-sm text-gray-300 mb-1">
                        <i class="fas fa-eye text-blue-400 mr-1"></i>
                        äº®åº¦: ${obs.magnitude} ç­‰æ˜Ÿ
                    </div>
                    <div class="text-sm text-gray-300">
                        <i class="fas fa-map-marker-alt text-green-400 mr-1"></i>
                        ä½ç½®: ${obs.location}
                    </div>
                </div>
            `).join('');
        }

        // Update community stats
        function updateCommunityStats() {
            // Simulate dynamic stats
            document.getElementById('total-messages').textContent = (1247 + Math.floor(Math.random() * 10)).toLocaleString();
            document.getElementById('shared-images').textContent = (89 + Math.floor(Math.random() * 5));
            document.getElementById('observation-reports').textContent = (156 + Math.floor(Math.random() * 8));
            document.getElementById('active-today').textContent = (23 + Math.floor(Math.random() * 5));
            document.getElementById('online-count').textContent = (47 + Math.floor(Math.random() * 10));
        }

        // Send message function
        function sendMessage() {
            const input = document.getElementById('message-input');
            const message = input.value.trim();
            
            if (message) {
                // Add message to chat (simulate)
                const newMessage = {
                    user: 'ä½ ',
                    avatar: 'ä½ ',
                    message: message,
                    time: 'åˆšåˆš',
                    type: 'text'
                };
                
                sampleMessages.unshift(newMessage);
                renderChatMessages();
                input.value = '';
                
                // Simulate response
                setTimeout(() => {
                    const responses = [
                        'å¾ˆæœ‰è¶£çš„å‘ç°ï¼',
                        'æ„Ÿè°¢åˆ†äº«è§‚æµ‹æ•°æ®',
                        'æˆ‘ä¹Ÿæ³¨æ„åˆ°äº†ç±»ä¼¼ç°è±¡',
                        'è¿™ä¸ªè§‚å¯Ÿå¾ˆæœ‰ä»·å€¼',
                        'æœŸå¾…æ›´å¤šæ›´æ–°'
                    ];
                    
                    const randomResponse = responses[Math.floor(Math.random() * responses.length)];
                    sampleMessages.unshift({
                        user: sampleUsers[Math.floor(Math.random() * sampleUsers.length)].name,
                        avatar: sampleUsers[Math.floor(Math.random() * sampleUsers.length)].avatar,
                        message: randomResponse,
                        time: 'åˆšåˆš',
                        type: 'text'
                    });
                    renderChatMessages();
                }, 1000 + Math.random() * 2000);
            }
        }

        // Event Listeners
        document.getElementById('send-message').addEventListener('click', sendMessage);
        document.getElementById('message-input').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                sendMessage();
            }
        });

        // Image upload modal
        document.getElementById('upload-image-btn').addEventListener('click', () => {
            document.getElementById('image-upload-modal').classList.remove('hidden');
        });

        document.getElementById('select-image').addEventListener('click', () => {
            document.getElementById('image-upload').click();
        });

        document.getElementById('cancel-upload').addEventListener('click', () => {
            document.getElementById('image-upload-modal').classList.add('hidden');
        });

        document.getElementById('confirm-upload').addEventListener('click', () => {
            // Simulate image upload
            const newMessage = {
                user: 'ä½ ',
                avatar: 'ä½ ',
                message: 'åˆ†äº«äº†ä¸€å¼ æ–°çš„è§‚æµ‹å›¾ç‰‡ ğŸ“¸',
                time: 'åˆšåˆš',
                type: 'image'
            };
            
            sampleMessages.unshift(newMessage);
            renderChatMessages();
            document.getElementById('image-upload-modal').classList.add('hidden');
            
            // Show success message
            alert('å›¾ç‰‡ä¸Šä¼ æˆåŠŸï¼');
        });

        // Observation report modal
        document.getElementById('share-observation-btn').addEventListener('click', () => {
            document.getElementById('observation-modal').classList.remove('hidden');
            // Set current time
            const now = new Date();
            const timeString = now.toISOString().slice(0, 16);
            document.getElementById('observation-time').value = timeString;
        });

        document.getElementById('cancel-observation').addEventListener('click', () => {
            document.getElementById('observation-modal').classList.add('hidden');
        });

        document.getElementById('observation-form').addEventListener('submit', (e) => {
            e.preventDefault();
            
            // Simulate report submission
            const newMessage = {
                user: 'ä½ ',
                avatar: 'ä½ ',
                message: 'æäº¤äº†æ–°çš„è§‚æµ‹æŠ¥å‘Š ğŸ“Š',
                time: 'åˆšåˆš',
                type: 'report'
            };
            
            sampleMessages.unshift(newMessage);
            renderChatMessages();
            document.getElementById('observation-modal').classList.add('hidden');
            
            // Show success message
            alert('è§‚æµ‹æŠ¥å‘Šæäº¤æˆåŠŸï¼');
            
            // Reset form
            document.getElementById('observation-form').reset();
        });

        // Quick action buttons
        document.getElementById('quick-observation').addEventListener('click', () => {
            document.getElementById('share-observation-btn').click();
        });

        document.getElementById('quick-image').addEventListener('click', () => {
            document.getElementById('upload-image-btn').click();
        });

        document.getElementById('quick-report').addEventListener('click', () => {
            document.getElementById('share-observation-btn').click();
        });

        // Initialize page
        initializePage();

        // Update stats every 30 seconds
        setInterval(updateCommunityStats, 30000);

        // Simulate new messages
        setInterval(() => {
            if (Math.random() < 0.3) { // 30% chance every 10 seconds
                const randomUser = sampleUsers[Math.floor(Math.random() * sampleUsers.length)];
                const randomMessages = [
                    'åˆšåˆšå®Œæˆäº†è§‚æµ‹ï¼Œæ•°æ®å¾ˆæœ‰è¶£ï¼',
                    'å¤©æ°”æ¡ä»¶ä¸é”™ï¼Œå½—æ˜Ÿå¾ˆæ¸…æ™°',
                    'åˆ†äº«ä¸€äº›æœ€æ–°çš„è§‚æµ‹æ•°æ®',
                    'æœ‰äººä¸€èµ·è§‚æµ‹å—ï¼Ÿ',
                    'å½—æ˜Ÿçš„å°¾å·´çœ‹èµ·æ¥æ›´é•¿äº†'
                ];
                
                sampleMessages.unshift({
                    user: randomUser.name,
                    avatar: randomUser.avatar,
                    message: randomMessages[Math.floor(Math.random() * randomMessages.length)],
                    time: 'åˆšåˆš',
                    type: 'text'
                });
                
                renderChatMessages();
            }
        }, 10000);
    </script>
</body>
</html>